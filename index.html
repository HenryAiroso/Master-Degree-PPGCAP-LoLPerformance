<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>LoL Performance AI - Research Lab</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- LIBRARIES -->
    <!-- PixiJS para renderização gráfica avançada (Estilo Game Engine) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pixi.js/7.3.2/pixi.min.js"></script>
    <!-- GSAP para animações de UI e Timeline -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>

    <!-- FONTS -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Rajdhani:wght@600;700&display=swap"
      rel="stylesheet"
    />

    <style>
      /* =========================================
         ESTILO "INDUSTRIAL RETRÔ"
         ========================================= */
      :root {
        --bg-dark: #05070a;
        --panel-bg: #16181d;
        --text-main: #dcdacb;
        --accent-green: #44d65c;
        --accent-gold: #ffcd75;
        --accent-red: #e53b44;
        --ui-shadow: 0 8px 0 rgba(0,0,0,0.5);
      }

      * { box-sizing: border-box; }

      body {
        margin: 0;
        padding: 0;
        background-color: var(--bg-dark);
        font-family: "Press Start 2P", cursive;
        color: var(--text-main);
        overflow-x: hidden;
        height: 100vh;
        width: 100vw;
      }

      /* CAMADAS */
      
      /* 1. Fundo (CSS Handle) - Resolve o erro de URL do PixiJS */
      .layer-bg {
        position: fixed;
        top: 0; left: 0;
        width: 100%; height: 100%;
        background: #111 url('assets/lab-base.png') no-repeat center bottom;
        background-size: cover; /* Garante cobertura total */
        image-rendering: pixelated; /* Mantém a nitidez da arte */
        z-index: 0;
      }

      /* 2. Jogo (Robôs e Partículas) */
      #game-stage {
        position: fixed;
        top: 0; left: 0;
        width: 100%; height: 100%;
        z-index: 1;
        pointer-events: none; /* Deixa clicar através */
      }

      /* 3. UI (Interface) */
      #ui-layer {
        position: relative;
        z-index: 10;
        width: 100%;
        min-height: 100vh;
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 40px 20px;
        pointer-events: none; 
      }

      .interactive {
        pointer-events: auto;
      }

      /* =========================================
         COMPONENTES UI
         ========================================= */
      
      /* 1. PLACA DO TÍTULO (OUTDOOR) */
      .sign-container {
        position: relative;
        margin-bottom: 30px;
        animation: floatSign 6s ease-in-out infinite;
      }
      
      .rope {
        position: absolute;
        top: -1000px; /* Vai até o teto */
        width: 4px;
        height: 1000px;
        background: #1a1a1a;
        border-left: 1px solid #333;
        z-index: -1;
      }
      .rope.left { left: 20px; transform: rotate(2deg); bottom: 90%; }
      .rope.right { right: 20px; transform: rotate(-2deg); bottom: 90%; }

      .sign-board {
        background: #b83b3b;
        border: 4px solid #3e1010;
        padding: 15px 30px;
        box-shadow: var(--ui-shadow);
        transform: rotate(-1deg);
        text-align: center;
      }

      .sign-title {
        font-size: 1.4rem;
        color: #fff;
        text-shadow: 3px 3px 0 #591418;
        margin: 0;
        text-transform: uppercase;
        line-height: 1.4;
      }
      .sign-sub {
        display: block;
        font-size: 0.6rem;
        color: var(--accent-gold);
        margin-top: 5px;
        letter-spacing: 1px;
      }

      /* 2. MONITOR CENTRAL (CRT) */
      .monitor-wrapper {
        background: #1a1a1a;
        padding: 10px;
        border-radius: 4px;
        box-shadow: 0 20px 40px rgba(0,0,0,0.8);
        width: 100%;
        max-width: 800px;
        margin-bottom: 30px;
        position: relative;
      }
      /* Detalhes físicos do monitor */
      .monitor-wrapper::before {
        content: "MODEL: CRT-9000";
        position: absolute;
        bottom: 4px; right: 15px;
        font-size: 0.4rem;
        color: #555;
        font-family: sans-serif;
      }

      .crt-screen {
        background: #08090b;
        border: 2px solid #333;
        height: 250px;
        padding: 25px;
        overflow: hidden;
        position: relative;
        color: var(--accent-green);
        font-size: 0.75rem; /* Fonte ajustada */
        line-height: 1.8;
        text-shadow: 0 0 4px rgba(68, 214, 92, 0.4);
      }

      /* Scanlines */
      .crt-screen::after {
        content: "";
        position: absolute;
        inset: 0;
        background: repeating-linear-gradient(
          0deg,
          rgba(0,0,0,0.15),
          rgba(0,0,0,0.15) 1px,
          transparent 1px,
          transparent 3px
        );
        pointer-events: none;
      }

      /* 3. PRANCHETAS (LATERAIS) */
      .deck-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
        width: 100%;
        max-width: 800px;
        margin-bottom: 30px;
      }

      .clipboard {
        background: #e6e2d3; /* Papel/Metal Claro */
        color: #222;
        padding: 15px;
        position: relative;
        box-shadow: 5px 5px 0 rgba(0,0,0,0.4);
        border: 1px solid #999;
      }
      
      /* Grampo da prancheta */
      .clipboard::before {
        content: "";
        position: absolute;
        top: -8px; left: 50%; transform: translateX(-50%);
        width: 60px; height: 16px;
        background: #444;
        border: 2px solid #111;
        border-radius: 2px;
      }

      .clip-title {
        background: #222;
        color: #fff;
        padding: 5px;
        text-align: center;
        font-size: 0.6rem;
        margin-bottom: 15px;
        text-transform: uppercase;
      }

      .clip-content ul {
        list-style: none;
        padding: 0; margin: 0;
        font-family: "Rajdhani", sans-serif; /* Fonte de leitura melhor */
        font-weight: 700;
        font-size: 1rem;
        line-height: 1.4;
      }
      .clip-content li {
        margin-bottom: 6px;
        padding-left: 15px;
        position: relative;
      }
      .clip-content li::before {
        content: "■";
        color: var(--accent-red);
        font-size: 0.6rem;
        position: absolute;
        left: 0; top: 2px;
      }

      /* 4. CAIXA (RODAPÉ) - AJUSTADO */
      .cargo-crate {
        background: #4a3b32;
        border: 4px solid #2b1e16;
        padding: 20px;
        width: 100%;
        max-width: 700px;
        text-align: center;
        position: relative;
        box-shadow: 0 10px 20px rgba(0,0,0,0.6);
      }
      
      /* Faixa de Perigo */
      .cargo-crate::after {
        content: "";
        position: absolute;
        bottom: 0; left: 0; width: 100%; height: 8px;
        background: repeating-linear-gradient(
          -45deg,
          #ffcd75,
          #ffcd75 10px,
          #111 10px,
          #111 20px
        );
      }

      .legal-text {
        /* AUMENTADO conforme pedido */
        font-family: "Rajdhani", sans-serif;
        font-weight: 600;
        font-size: 0.9rem; 
        color: #dacbb6;
        margin-bottom: 15px;
        line-height: 1.4;
      }

      .btn-pixel {
        display: inline-block;
        background: var(--accent-gold);
        color: #000;
        text-decoration: none;
        padding: 12px 24px;
        border: 3px solid #000;
        box-shadow: 4px 4px 0 #000;
        font-size: 0.7rem;
        text-transform: uppercase;
        font-weight: bold;
        transition: transform 0.1s;
      }
      .btn-pixel:active {
        transform: translate(2px, 2px);
        box-shadow: 2px 2px 0 #000;
      }

      /* Cursor Piscante */
      .cursor {
        display: inline-block;
        width: 8px; height: 14px;
        background: var(--accent-green);
        animation: blink 1s infinite;
        vertical-align: middle;
      }

      @keyframes blink { 50% { opacity: 0; } }
      @keyframes floatSign {
        0%, 100% { transform: rotate(-1deg) translateY(0); }
        50% { transform: rotate(1deg) translateY(5px); }
      }

      /* RESPONSIVIDADE */
      @media (max-width: 768px) {
        .deck-grid { grid-template-columns: 1fr; }
        .rope { display: none; }
        .monitor-wrapper { width: 95%; }
        .cargo-crate { width: 95%; }
      }
    </style>
  </head>
  <body>

    <!-- CAMADA 1: FUNDO (CSS) -->
    <div class="layer-bg"></div>

    <!-- CAMADA 2: JOGO (PIXIJS - Transparente) -->
    <div id="game-stage"></div>

    <!-- CAMADA 3: UI (HTML/CSS) -->
    <div id="ui-layer">
      
      <!-- 1. TÍTULO -->
      <header class="sign-container interactive">
        <div class="rope left"></div>
        <div class="rope right"></div>
        <div class="sign-board">
          <h1 class="sign-title">LOL PERFORMANCE</h1>
          <span class="sign-sub">AI MASTER'S DISSERTATION</span>
        </div>
      </header>

      <!-- 2. MONITOR -->
      <main class="monitor-wrapper interactive">
        <div class="crt-screen" id="console-output">
          <!-- JS type writer -->
        </div>
      </main>

      <!-- 3. INFORMAÇÕES -->
      <section class="deck-grid">
        
        <article class="clipboard interactive">
          <div class="clip-title">PROJECT GOALS</div>
          <div class="clip-content">
            <ul>
              <li>Collect match-v5 data via API.</li>
              <li>Build structured datasets (Gold/XP).</li>
              <li>Train Deep Learning models.</li>
              <li>Predict Win Probability.</li>
            </ul>
          </div>
        </article>

        <article class="clipboard interactive" style="background: #d6dfe4;">
          <div class="clip-title">TECH STACK</div>
          <div class="clip-content">
            <ul>
              <li><strong>CORE:</strong> Python 3.9+</li>
              <li><strong>ML:</strong> PyTorch & Scikit-Learn</li>
              <li><strong>DATA:</strong> Pandas / NumPy</li>
              <li><strong>ENV:</strong> Jupyter Lab</li>
            </ul>
          </div>
        </article>

      </section>

      <!-- 4. RODAPÉ -->
      <footer class="cargo-crate interactive">
        <p class="legal-text">
          This project isn’t endorsed by Riot Games and doesn’t reflect the views or opinions of Riot Games or anyone officially involved in producing or managing Riot Games properties. Riot Games and all associated properties are trademarks or registered trademarks of Riot Games, Inc.
        </p>
        <a href="https://github.com/HenryAiroso/Master-Degree-PPGCAP-LoLPerformance" target="_blank" class="btn-pixel">
          ACCESS REPOSITORY
        </a>
      </footer>

    </div>

    <script>
      /**
       * =================================================
       * LÓGICA VISUAL (PIXI.JS + GSAP)
       * Simulação de Robôs "64-bit" e Ambiente Dinâmico
       * =================================================
       */
      
      // Configuração Inicial do PixiJS
      const app = new PIXI.Application({
        backgroundAlpha: 0, // IMPORTANTE: Fundo transparente para ver o CSS atrás
        resizeTo: window,
        antialias: false, // Pixel Art Crispy
        resolution: window.devicePixelRatio || 1,
      });
      document.getElementById('game-stage').appendChild(app.view);

      // Container Principal
      const world = new PIXI.Container();
      app.stage.addChild(world);

      // NOTA: O Fundo agora é carregado via CSS na classe .layer-bg
      // Isso evita erros de URL do PixiJS em ambientes blob/iframe.

      // --- 1. GERADOR DE SPRITES PROCEDURAIS (64-BIT STYLE) ---
      function createRobotTexture(colorMain, colorAccent) {
        const g = new PIXI.Graphics();
        
        // Desenho "High-Res" do Robô (24x24 grid)
        // Corpo
        g.beginFill(0x222222); // Contorno
        g.drawRect(0, 0, 24, 24);
        g.beginFill(colorMain); // Metal Base
        g.drawRect(2, 2, 20, 20);
        
        // Sombreamento
        g.beginFill(0x000000, 0.2);
        g.drawRect(2, 18, 20, 4); // Sombra inferior
        g.drawRect(18, 2, 4, 20); // Sombra lateral

        // Visor
        g.beginFill(colorAccent);
        g.drawRect(4, 5, 16, 6);
        g.beginFill(0xFFFFFF, 0.8); // Reflexo
        g.drawRect(5, 6, 4, 2);

        // Detalhes
        g.beginFill(0x444444);
        g.drawRect(6, 14, 12, 6); // Peito
        g.beginFill(0xFF0000);
        g.drawRect(8, 16, 2, 2); // Led

        return app.renderer.generateTexture(g);
      }

      const textureWorker = createRobotTexture(0xCCCCCC, 0x44ff66); // Cinza/Verde
      const textureDrone = createRobotTexture(0x556677, 0xff3333);  // Azul/Vermelho

      // --- 2. ENTIDADES ---
      const robots = [];

      class Robot {
        constructor(type, x, y) {
          this.container = new PIXI.Container();
          this.container.x = x;
          this.container.y = y;
          
          this.sprite = new PIXI.Sprite(type === 'worker' ? textureWorker : textureDrone);
          this.sprite.anchor.set(0.5, 1);
          this.sprite.scale.set(2); // Scale up
          
          this.container.addChild(this.sprite);
          world.addChild(this.container);
          
          // Estado
          this.type = type;
          this.homeX = x;
          this.state = 'idle'; 
        }

        playAnimation(anim) {
          if(anim === 'panic') {
            gsap.to(this.sprite, { y: -5, yoyo: true, repeat: -1, duration: 0.1 });
            gsap.to(this.sprite, { rotation: 0.1, yoyo: true, repeat: -1, duration: 0.05 });
          }
          if(anim === 'idle') {
            gsap.killTweensOf(this.sprite);
            this.sprite.y = 0;
            this.sprite.rotation = 0;
            gsap.to(this.sprite.scale, { y: 1.9, yoyo: true, repeat: -1, duration: 1 });
          }
        }
      }

      // Coordenadas (Ajustadas para a imagem)
      const platformY = app.screen.height * 0.55;
      
      // Robô Vítima (Esq)
      const bot1 = new Robot('worker', app.screen.width * 0.35, platformY);
      bot1.playAnimation('idle');

      // Robô Resgate (Dir)
      const bot2 = new Robot('worker', app.screen.width * 0.65, platformY);
      bot2.playAnimation('idle');

      // Drone
      const drone = new Robot('drone', app.screen.width * 0.5, app.screen.height * 0.2);
      gsap.to(drone.container, { y: drone.container.y + 20, yoyo: true, repeat: -1, duration: 2, ease: 'sine.inOut' });

      // --- 3. SISTEMA DE EVENTOS ---
      function triggerEmergency() {
        // 1. Fogo
        bot1.state = 'panic';
        bot1.playAnimation('panic');
        
        const smokeTicker = setInterval(() => createParticle(bot1.container.x, bot1.container.y - 40, 'smoke'), 100);
        const fireTicker = setInterval(() => createParticle(bot1.container.x, bot1.container.y - 20, 'fire'), 200);

        // 2. Resgate
        setTimeout(() => {
          bot2.state = 'rescue';
          bot2.sprite.scale.x = -2; // Vira
          
          gsap.to(bot2.container, { 
            x: bot1.container.x + 60, 
            duration: 2, 
            ease: 'power1.inOut',
            onComplete: () => {
              const foamTicker = setInterval(() => {
                createParticle(bot2.container.x - 30, bot2.container.y - 30, 'foam');
              }, 50);

              setTimeout(() => {
                clearInterval(smokeTicker);
                clearInterval(fireTicker);
                clearInterval(foamTicker);
                
                bot1.playAnimation('idle');
                bot2.sprite.scale.x = 2; 
                
                gsap.to(bot2.container, { x: bot2.homeX, duration: 3, ease: 'power1.inOut' });
                
                setTimeout(triggerEmergency, 10000);
              }, 3000);
            }
          });
        }, 1500);
      }

      setTimeout(triggerEmergency, 3000);

      // --- 4. PARTÍCULAS ---
      function createParticle(x, y, type) {
        const p = new PIXI.Graphics();
        if(type === 'smoke') {
          p.beginFill(0x333333, 0.6);
          p.drawCircle(0,0, 5 + Math.random() * 5);
        } else if(type === 'fire') {
          p.beginFill(0xFFaa00, 0.8);
          p.drawRect(0,0, 4, 4);
        } else {
          p.beginFill(0xFFFFFF, 0.9);
          p.drawCircle(0,0, 3);
        }
        
        p.x = x; p.y = y;
        world.addChild(p);

        let life = 1.0;
        const tick = (delta) => {
          life -= 0.02;
          p.alpha = life;
          p.y -= (type === 'foam' ? -1 : 1) * 2;
          p.x += (Math.random() - 0.5);
          
          if(life <= 0) {
            app.ticker.remove(tick);
            p.destroy();
          }
        };
        app.ticker.add(tick);
      }

      // --- 5. TYPEWRITER ---
      const text = `> SYSTEM INITIALIZED...\n> LOADING: Master-Degree-PPGCAP\n> TARGET: LoL Performance Analysis\n\nSTATUS: ACADEMIC RESEARCH.\nDATA SOURCE:
Using Riot Games API to build datasets for research.`;
      const consoleDiv = document.getElementById('console-output');
      let i = 0;
      
      function type() {
        if (i < text.length) {
          consoleDiv.innerHTML += text.charAt(i) === '\n' ? '<br>' : text.charAt(i);
          i++;
          setTimeout(type, 30);
        } else {
          consoleDiv.innerHTML += '<span class="cursor"></span>';
        }
      }
      setTimeout(type, 1000);

    </script>
  </body>
</html>
