<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <title>LoL Performance AI - Research Lab</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- LIBRARIES -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pixi.js/7.3.2/pixi.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>

    <!-- FONTS -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Rajdhani:wght@600;700&display=swap"
      rel="stylesheet"
    />

    <style>
      /* =========================================
         CORE STYLE (Industrial Retro Refined)
         ========================================= */
      :root {
        --bg-dark: #0a0a0a;
        --text-main: #dcdacb;
        --accent-green: #44d65c;
        --accent-gold: #ffcd75;
        --accent-red: #e53b44;
        --metal-dark: #1a1c2c;
        --paper-bg: #dcdacb;
        --monitor-bg: #05080a;
        --ui-shadow: 6px 6px 0 rgba(0,0,0,0.8);
      }

      * { box-sizing: border-box; }

      body {
        margin: 0;
        padding: 0;
        background-color: var(--bg-dark);
        font-family: "Press Start 2P", cursive;
        color: var(--text-main);
        overflow: hidden;
        height: 100vh;
        width: 100vw;
      }

      /* CAMADAS VISUAIS */
      .layer-structure {
        position: fixed;
        top: 0; left: 0; width: 100%; height: 100%;
        background-image: url('assets/lab-base.png'), url('lab-base.png'), url('assets/lab-base.jpg');
        background-position: center bottom;
        background-size: cover;
        background-repeat: no-repeat;
        image-rendering: pixelated;
        z-index: 0;
      }

      #game-stage {
        position: fixed;
        top: 0; left: 0; width: 100%; height: 100%;
        z-index: 1;
        pointer-events: none;
      }

      #ui-layer {
        position: relative;
        z-index: 10;
        width: 100%; height: 100vh;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: space-between;
        padding: 2vh 2vw;
        pointer-events: none;
        background: radial-gradient(circle, transparent 60%, rgba(0,0,0,0.4) 100%);
      }

      .interactive { pointer-events: auto; }

      /* =========================================
         UI COMPONENTS (A Placa que você gostou)
         ========================================= */

      /* PLACA SUPERIOR */
      .sign-container {
        margin-top: 15px;
        animation: floatSign 5s ease-in-out infinite;
        position: relative;
      }
      .sign-container::before, .sign-container::after {
        content: ""; position: absolute; top: -100vh; width: 4px; height: 100vh;
        background: #222; border-left: 2px solid #000; z-index: -1;
      }
      .sign-container::before { left: 15px; transform: rotate(1deg); }
      .sign-container::after { right: 15px; transform: rotate(-1deg); }

      .sign-board {
        background: linear-gradient(160deg, #e65c40 0%, #bf3626 60%, #3a4a5e 85%, #242e38 100%);
        border: 4px solid #1a1c2c;
        padding: 12px 24px;
        box-shadow: var(--ui-shadow);
        text-align: center;
        position: relative;
        border-radius: 2px;
      }
      .sign-board::before, .sign-board::after {
        content: "+"; position: absolute; top: 4px; color: #111; font-size: 10px;
      }
      .sign-board::before { left: 6px; } .sign-board::after { right: 6px; }

      .sign-title {
        font-size: 1rem; color: #fff; text-shadow: 2px 2px 0 #3e1010; margin: 0; text-transform: uppercase; letter-spacing: 2px;
      }
      .sign-sub {
        font-size: 0.55rem; color: var(--accent-gold); display: block; margin-top: 6px; letter-spacing: 1px; background: rgba(0,0,0,0.3); padding: 4px 8px; border-radius: 4px;
      }

      /* MONITOR */
      .monitor-wrapper {
        background: #222; padding: 8px; border-radius: 4px;
        box-shadow: 0 15px 40px rgba(0,0,0,0.9);
        width: 100%; max-width: 680px; position: relative;
        border: 3px solid #111; margin-top: 10px;
      }
      .monitor-wrapper::before {
        content:""; position:absolute; top:100%; left:50%; width:90%; height:10px;
        background: #000; opacity:0.6; filter:blur(8px); transform:translateX(-50%);
      }
      .crt-screen {
        background: var(--monitor-bg); border: 2px solid #444; height: 150px; padding: 15px;
        overflow: hidden; position: relative; color: var(--accent-green);
        font-size: 0.55rem; line-height: 1.5; text-shadow: 0 0 2px rgba(68, 214, 92, 0.5); white-space: pre-wrap;
      }
      .crt-screen::after {
        content: ""; position: absolute; inset: 0;
        background: repeating-linear-gradient(0deg, rgba(0,0,0,0.1), rgba(0,0,0,0.1) 1px, transparent 1px, transparent 2px);
        pointer-events: none;
      }

      /* GRIDS */
      .deck-grid { display: flex; justify-content: center; gap: 20px; width: 100%; max-width: 750px; }
      
      .clipboard {
        background: var(--paper-bg); color: #1a1c2c; padding: 12px; position: relative;
        box-shadow: var(--ui-shadow); border: 2px solid #555; flex: 1; display: flex; flex-direction: column;
      }
      .clipboard::before {
        content: ""; position: absolute; top: -8px; left: 50%; transform: translateX(-50%);
        width: 40px; height: 12px; background: #555; border: 2px solid #222; border-radius: 2px;
      }
      .clip-title {
        background: #222; color: #fff; padding: 5px; text-align: center; font-size: 0.55rem; margin-bottom: 10px; text-transform: uppercase; letter-spacing: 1px;
      }
      .clip-content ul { list-style: none; padding: 0; margin: 0; font-family: "Rajdhani", sans-serif; font-weight: 700; font-size: 0.75rem; line-height: 1.3; }
      .clip-content li { margin-bottom: 4px; padding-left: 12px; position: relative; }
      .clip-content li::before { content: "►"; color: var(--accent-red); font-size: 0.5rem; position: absolute; left: 0; top: 3px; }

      /* FOOTER */
      .cargo-crate {
        background: #4a3c31; border: 3px solid #2e221b; padding: 12px;
        width: 100%; max-width: 650px; text-align: center; position: relative;
        box-shadow: var(--ui-shadow); margin-bottom: 15px;
      }
      .cargo-crate::after {
        content: ""; position: absolute; bottom: 0; left: 0; width: 100%; height: 6px;
        background: repeating-linear-gradient(-45deg, #ffcd75, #ffcd75 10px, #222 10px, #222 20px);
      }
      .legal-text { font-family: "Rajdhani", sans-serif; font-weight: 600; font-size: 0.7rem; color: #cbbfae; margin-bottom: 8px; line-height: 1.2; }
      .btn-pixel {
        display: inline-block; background: var(--accent-gold); color: #000; text-decoration: none;
        padding: 6px 14px; border: 2px solid #000; box-shadow: 2px 2px 0 #000; font-size: 0.55rem; font-weight: bold;
        transition: transform 0.1s;
      }
      .btn-pixel:active { transform: translate(1px, 1px); box-shadow: 0px 0px 0 #000; }

      @keyframes floatSign { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(3px); } }
      .cursor { display: inline-block; width: 5px; height: 10px; background: var(--accent-green); animation: blink 1s infinite; vertical-align: middle; }
      @keyframes blink { 50% { opacity: 0; } }

      @media (max-width: 768px) {
        #ui-layer { height: auto; overflow-y: auto; padding-top: 50px; }
        .deck-grid { flex-direction: column; }
        .monitor-wrapper, .cargo-crate { width: 95%; }
      }
    </style>
  </head>
  <body>

    <div class="layer-structure"></div>
    <div id="game-stage"></div>

    <div id="ui-layer">
      <header class="sign-container interactive">
        <div class="sign-board">
          <h1 class="sign-title">LOL PERFORMANCE</h1>
          <span class="sign-sub">AI MASTER'S DISSERTATION</span>
        </div>
      </header>

      <main class="monitor-wrapper interactive">
        <div class="crt-screen" id="console-output"></div>
      </main>

      <section class="deck-grid">
        <article class="clipboard interactive">
          <div class="clip-title">PROJECT GOALS</div>
          <div class="clip-content">
            <ul>
              <li>Collect historical ranked match data (Riot API).</li>
              <li>Build structured datasets (gold, XP, objectives).</li>
              <li>Train predictive models (Deep Learning).</li>
              <li>Produce aggregated statistics for analysis.</li>
            </ul>
          </div>
        </article>

        <article class="clipboard interactive" style="background: #d3dce0;">
          <div class="clip-title">TECH & ETHICS</div>
          <div class="clip-content">
            <ul>
              <li><strong>CORE:</strong> Python (Data Collection/Eng.)</li>
              <li><strong>ML:</strong> PyTorch & Scikit-Learn</li>
              <li><strong>DATA:</strong> Pandas / Jupyter Notebooks</li>
              <li><strong>API:</strong> Riot (match-v5, summoner-v4)</li>
            </ul>
            <hr style="border: 0; border-top: 1px dashed #555; margin: 8px 0;">
            <div style="font-size: 0.65rem; font-family: 'Rajdhani', sans-serif; line-height: 1.2; color: #444;">
              <strong>ETHICS:</strong> Non-commercial. Aggregate analysis. Individual players not profiled.
            </div>
          </div>
        </article>
      </section>

      <footer class="cargo-crate interactive">
        <p class="legal-text">
          This project isn’t endorsed by Riot Games and doesn’t reflect the views or opinions of Riot Games or anyone officially involved in producing or managing Riot Games properties. Riot Games and all associated properties are trademarks or registered trademarks of Riot Games, Inc.
        </p>
        <a href="https://github.com/HenryAiroso/Master-Degree-PPGCAP-LoLPerformance" target="_blank" class="btn-pixel">
          ACCESS REPOSITORY
        </a>
      </footer>
    </div>

    <script>
      (function() {
        
        // CONFIGURAÇÃO DO PIXI.JS
        const app = new PIXI.Application({
          backgroundAlpha: 0,
          resizeTo: window,
          antialias: false,
          resolution: window.devicePixelRatio || 1,
        });
        document.getElementById('game-stage').appendChild(app.view);

        const world = new PIXI.Container();
        app.stage.addChild(world);

        // CORES
        const C = {
          PURPLE: 0x6a4c93, PURPLE_DARK: 0x402a5e, ORANGE: 0xe07a5f, CYAN: 0x4ecdc4,
          TEAL: 0x2b5c59, YELLOW: 0xf7b731, METAL: 0x95afc0, METAL_DARK: 0x535c68,
          BLACK: 0x1e272e, WHITE: 0xffffff, RED: 0xff4555, BLUE_SUIT: 0x4a6b8a
        };

        // ============================================
        // 1. GERADOR DE SPRITES (Robôs 64x64 Pixel Art)
        // ============================================
        function createRobotTexture(type) {
          const g = new PIXI.Graphics();
          const p = 1; // 1:1 Drawing on canvas

          const rect = (x, y, w, h, color) => {
            g.beginFill(color); g.drawRect(x, y, w, h); g.endFill();
          };

          if (type === 'janitor') {
            // ROBÔ FAXINEIRO (Pequeno, Vassoura)
            // Corpo
            rect(20, 30, 24, 18, C.ORANGE);
            rect(20, 48, 24, 4, C.METAL_DARK); // Sombra baixo
            
            // Olhos
            rect(24, 34, 16, 6, C.BLACK);
            rect(26, 35, 4, 4, C.YELLOW);
            rect(34, 35, 4, 4, C.YELLOW);

            // Chapéu/Boné
            rect(20, 28, 24, 2, C.BLUE_SUIT);
            rect(24, 24, 16, 4, C.BLUE_SUIT);

            // Rodas
            g.beginFill(C.BLACK); g.drawCircle(24, 52, 4); g.drawCircle(40, 52, 4); g.endFill();
            
            // Vassoura (Separada depois, mas textura base aqui)
            // (Desenharemos a vassoura como objeto filho para animar)
          } 
          else if (type === 'drone_wire') {
            // DRONE CONECTOR (Voa, segura fio)
            // Corpo
            rect(22, 20, 20, 14, C.METAL);
            rect(22, 34, 20, 2, C.METAL_DARK);
            // Hélice
            rect(10, 16, 44, 2, C.BLACK);
            rect(10, 14, 4, 2, C.WHITE); rect(50, 14, 4, 2, C.WHITE);
            // Olho
            rect(28, 24, 8, 6, C.CYAN);
            // Gancho inferior
            rect(30, 34, 4, 6, C.METAL_DARK);
          }
          else if (type === 'tank') {
            // TANK (Trabalho Pesado)
            rect(16, 20, 32, 24, C.PURPLE);
            rect(20, 24, 24, 12, C.PURPLE_DARK); // Peito
            rect(24, 10, 16, 10, C.PURPLE); // Cabeça
            rect(28, 14, 8, 4, C.RED); // Olho
            // Braços
            rect(8, 24, 8, 16, C.METAL_DARK);
            rect(48, 24, 8, 16, C.METAL_DARK);
            // Pernas
            rect(18, 44, 8, 12, C.METAL);
            rect(38, 44, 8, 12, C.METAL);
          }

          return app.renderer.generateTexture(g);
        }

        const texJanitor = createRobotTexture('janitor');
        const texDrone = createRobotTexture('drone_wire');
        const texTank = createRobotTexture('tank');

        // Vassoura Sprite
        const broomG = new PIXI.Graphics();
        broomG.beginFill(0x8B4513); broomG.drawRect(0,0,4,30); // Cabo
        broomG.beginFill(0xE0C068); broomG.drawRect(-6,25,16,10); // Cerdas
        const texBroom = app.renderer.generateTexture(broomG);

        // ============================================
        // 2. ENTIDADES
        // ============================================
        class Robot {
          constructor(texture, x, y, scale=1) {
            this.container = new PIXI.Container();
            this.container.x = x;
            this.container.y = y;

            this.sprite = new PIXI.Sprite(texture);
            this.sprite.anchor.set(0.5);
            this.sprite.scale.set(scale);
            this.container.addChild(this.sprite);

            // Sombra
            const sh = new PIXI.Graphics();
            sh.beginFill(0x000000, 0.3);
            sh.drawEllipse(0, 30*scale, 15*scale, 5*scale);
            this.container.addChildAt(sh, 0);
            
            world.addChild(this.container);
          }
        }

        const W = window.innerWidth;
        const H = window.innerHeight;

        // --- ATORES ---
        // 1. Robô Tanque (Fixo soldando na parede)
        const tank = new Robot(texTank, W * 0.85, H * 0.55, 1.2);
        // Efeito de solda (Faíscas)
        const sparkG = new PIXI.Graphics();
        tank.container.addChild(sparkG);

        // 2. Faxineiro (Janitor)
        const janitor = new Robot(texJanitor, -100, H * 0.75, 1.0); // Começa fora
        const broom = new PIXI.Sprite(texBroom);
        broom.anchor.set(0.5, 0.2);
        broom.x = 15; broom.y = 10;
        broom.rotation = 0.5;
        janitor.sprite.addChild(broom); // Anexa vassoura

        // 3. Drone Conector
        const drone = new Robot(texDrone, -100, H * 0.2, 1.0); // Começa fora
        
        // Fio (Wire)
        const wire = new PIXI.Graphics();
        world.addChild(wire); // Desenha o fio no mundo

        // ============================================
        // 3. CENA / HISTÓRIA (Timeline)
        // ============================================
        
        // Estado
        let wireState = 'none'; // none, connecting, connected, broken
        let wirePoints = { x1: 0, y1: 0, x2: 0, y2: 0 };

        // CICLO DE ANIMAÇÃO
        const storyTimeline = gsap.timeline({ repeat: -1, repeatDelay: 2 });

        // CENA 1: Drone Entra e Conecta o Fio
        storyTimeline.add(() => { wireState = 'connecting'; });
        storyTimeline.fromTo(drone.container, 
          { x: -50, y: H * 0.65 }, 
          { x: W * 0.4, y: H * 0.65, duration: 3, ease: 'power1.out' }
        );
        // Drone voa até o poste
        storyTimeline.to(drone.container, { x: W * 0.6, y: H * 0.65, duration: 2, onUpdate: () => {
           // Atualiza posição do fio enquanto drone voa
           wirePoints.x1 = -50; wirePoints.y1 = H * 0.76; // Ponto fixo na esq
           wirePoints.x2 = drone.container.x; wirePoints.y2 = drone.container.y + 20;
        }});
        // Drone fixa o fio e sai
        storyTimeline.add(() => { wireState = 'connected'; });
        storyTimeline.to(drone.container, { x: W + 50, y: H * 0.2, duration: 2, ease: 'power1.in' });

        // CENA 2: Janitor Entra Varrendo
        storyTimeline.fromTo(janitor.container, 
          { x: -50, rotation: 0 }, 
          { x: W * 0.25, duration: 4, ease: 'linear', onStart: () => {
             // Animação de varrer
             gsap.to(broom, { rotation: -0.5, yoyo: true, repeat: 20, duration: 0.2 });
          }}
        );

        // CENA 3: O Tropeço
        storyTimeline.to(janitor.container, { x: W * 0.35, duration: 1.5, ease: 'linear' }); // Chega perto do fio
        storyTimeline.add(() => {
            // Ação: Tropeça
            wireState = 'broken';
            gsap.to(janitor.container, { rotation: 1.5, x: "+=50", y: "+=20", duration: 0.5, ease: 'bounce.out' }); // Cai
            // Vassoura voa
            gsap.to(broom, { y: -100, rotation: 5, duration: 0.5, yoyo: true, repeat: 1 });
        });
        
        // Pausa dramática de vergonha
        storyTimeline.to({}, { duration: 2 });

        // CENA 4: Levanta e Sai
        storyTimeline.to(janitor.container, { rotation: 0, y: H * 0.75, duration: 1 });
        storyTimeline.to(janitor.container, { x: W + 100, duration: 3, ease: 'linear' });
        
        // Reset (Fio some, drone volta depois no loop)
        storyTimeline.add(() => { wireState = 'none'; wire.clear(); });

        // ============================================
        // 4. LOOP DE RENDERIZAÇÃO
        // ============================================
        let tick = 0;
        app.ticker.add(() => {
           tick++;

           // Animar Solda do Tank
           if (Math.random() < 0.1) {
              sparkG.clear();
              sparkG.beginFill(0xFFFF00);
              sparkG.drawRect(40 + Math.random()*10, 10 + Math.random()*10, 2, 2);
              sparkG.endFill();
           } else {
              sparkG.clear();
           }
           
           // Desenhar Fio
           wire.clear();
           if (wireState === 'connecting' || wireState === 'connected') {
              wire.lineStyle(2, 0x000000);
              // Curva Catenária (Barriga)
              wire.moveTo(wirePoints.x1, wirePoints.y1);
              wire.bezierCurveTo(
                (wirePoints.x1 + wirePoints.x2)/2, Math.max(wirePoints.y1, wirePoints.y2) + 50, // Control Point baixo
                (wirePoints.x1 + wirePoints.x2)/2, Math.max(wirePoints.y1, wirePoints.y2) + 50,
                wirePoints.x2, wirePoints.y2
              );
           } else if (wireState === 'broken') {
              // Fio partido em dois
              wire.lineStyle(2, 0x000000);
              // Parte Esq
              wire.moveTo(wirePoints.x1, wirePoints.y1);
              wire.lineTo(wirePoints.x1 + 100, wirePoints.y1 + 40);
              // Parte Dir (balançando)
              const swing = Math.sin(tick/10) * 10;
              wire.moveTo(W * 0.6, H * 0.65); // Onde o drone prendeu
              wire.lineTo(W * 0.6 + swing, H * 0.65 + 100);
           }

           // Bobbing dos Robôs
           drone.container.y += Math.sin(tick/20) * 0.5;
           
           // Partículas de Poeira (Fundo)
           // (Simplificado para performance)
        });

      })();

      // TYPEWRITER
      (function() {
        const text = `> SYSTEM READY.\n> LOADING: Master's Dissertation\n> SUBJECT: LoL Performance AI\n\nANALYSIS: ML models for player performance over time.`;
        const el = document.getElementById('console-output');
        let i = 0;
        function type() {
          if(i < text.length) {
            const c = text.charAt(i);
            el.innerHTML += c === '\n' ? '<br>' : c;
            i++; setTimeout(type, 30);
          } else {
            el.innerHTML += '<span class="cursor"></span>';
          }
        }
        setTimeout(type, 800);
      })();
    </script>
  </body>
</html>
